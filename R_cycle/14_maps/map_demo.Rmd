# Рисуем карты!

Карта вышки в три строчки!

```{r}
library(ggmap)
hse.sha <- "shabolovka, 26"
qmap(location = hse.sha,zoom=17,source="osm")
```

Добавим на карту координаты фотографий на [panoramio.com](panoramio.com)

Получаем данные:
```{r}
library(RCurl)
library(rjson)
library(plyr)

url <- "http://www.panoramio.com/map/get_panoramas.php?set=public&from=0&to=100&minx=37.606&miny=55.719&maxx=37.612&maxy=55.722"
panor.text <- getURL(url)

# this function creates an ugly list
panor.list <- fromJSON(panor.text)

# we just need the list of list called panor.list$photos
# the list of list as member of list... @#$%^!

# convert it to a pretty data frame!
panor <- ldply(panor.list$photos,data.frame)
head(panor)
```

Нанесём точки на карту!
```{r}
# get the map
hse.map <- get_map(hse.sha,zoom=17,source="osm")

ggmap(hse.map)+geom_point(data=panor,
	aes(x=longitude,y=latitude),size=3)
```
