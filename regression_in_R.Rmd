Апельсины и простая регрессия
==============================

В R есть куча встроенных наборов данных. Многие пакеты в себе помимо функций содержат также еще и примеры данных. Например, пакет `ggplot2` содержит в себе данные по стоимости бриллиантов `diamonds`.

Список всех наборов данных можно узнать с помощью команды `data()`

```{r}
data()
```

Мы воспользуемся набором про апельсиновые деревья.

```{r}
h<-Orange
summary(h)
plot(h$age,h$circumference)
```

Более подробную информацию о наборе данных про Апельсины ищем у Чебурашки. Чебурашку можно позвать командой `help(Orange)`.


Оценим обыкновенную регрессию
```{r}
model<-lm(circumference~age,data=h)
summ<-summary(model)
print(summ)
```

Из результатов оценивания `model` можно вытащить

Ковариационную матрицу, $\hat{\sigma}^2(X'X)^{-1}$:
```{r}
vcov(model)
```

Любимый всеми $R^2$:
```{r}
summ$r.squared
```

А также скорректированный $R^2_{adj}$:
```{r}
summ$adj.r.squared
```

Коэффициенты:
```{r}
model$coefficients
```

Доверительные интервалы для коэффициентов:
```{r}
confint(model,level=0.90)
```

Построение прогнозов с доверительным интервалом:
```{r}
new.data<-data.frame(age=c(100,200,300))
predict(model,new.data,interval="confidence")
```

Что еще можно вытащить из оцененной модели, можно узнать несколькими способами. Например, стоит почитать `help(summary.lm)`. Можно еще набрать в консоли `model$` и пару раз кликнуть `<Tab>`. Еще имеет смысл попробовать нажать `<Tab>` после `summ$`. Да еще гугл есть.

А вообще бывает полезно изобрести велосипед. Пусть где-то в R уже есть функция, считающая доверительный интервал для прогноза. Если вместо этого написать эту функцию своими руками, то можно получить плюс один к экспириенсу и перейти на следующий уровень.

